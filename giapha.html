<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phả Đồ Đại Tông Họ Phan - Uy Nghi Rồng Việt</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Playfair+Display:ital,wght@0,400;1,400&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --gold: #FFD700; --gold-dark: #B8860B; --red-royal: #800000; --bg-deep: #1a0505; --card-bg: linear-gradient(145deg, #2b0a0a, #000000); }
        body { background-color: var(--bg-deep); color: var(--gold); font-family: 'Playfair Display', serif; margin: 0; padding: 0; background-image: linear-gradient(to bottom, rgba(26,5,5,0.9), rgba(0,0,0,0.95)), url('https://www.transparenttextures.com/patterns/black-scales.png'); background-size: cover; background-attachment: fixed; }
        .back-btn { position: fixed; top: 20px; left: 20px; color: var(--gold); border: 2px solid var(--gold-dark); padding: 10px 25px; border-radius: 30px; text-decoration: none; background: rgba(0,0,0,0.6); z-index: 100; transition: 0.3s; font-family: 'Cinzel'; }
        .back-btn:hover { background: var(--red-royal); border-color: var(--gold); }

        /* --- HEADER CÓ RỒNG --- */
        header { text-align: center; padding: 60px 0 40px; border-bottom: 3px double var(--gold-dark); position: relative; background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent); }
        .header-content { display: flex; align-items: center; justify-content: center; gap: 30px; }
        
        /* ĐÃ SỬA: ĐƯỜNG DẪN ẢNH RỒNG CHUẨN XÁC */
        .dragon-img { height: 100px; filter: drop-shadow(0 0 5px var(--gold)); } 
        .dragon-left { transform: scaleX(-1); }
        
        h1 { font-family: 'Cinzel', serif; font-size: 3rem; color: var(--gold); margin: 0; text-shadow: 2px 2px 10px rgba(0,0,0,0.8), 0 0 20px var(--gold-dark); }
        .sub-header { color: #ddd; font-family: 'Dancing Script', cursive; margin-top: 15px; font-size: 1.5rem; }

        /* --- CSS CÂY GIA PHẢ THOÁNG --- */
        .genealogy-scroll { width: 100%; overflow-x: auto; padding: 70px 0 150px; display: flex; justify-content: center; cursor: grab; }
        .genealogy-scroll:active { cursor: grabbing; }
        
        /* Tăng min-width để giãn các nhánh */
        .tree { white-space: nowrap; min-width: 2000px; padding: 0 50px; } 
        .tree ul { padding-top: 80px; position: relative; display: flex; justify-content: center; }
        .tree li { float: left; text-align: center; list-style-type: none; position: relative; padding: 80px 40px 0 40px; }
        
        .tree li::before, .tree li::after { content: ''; position: absolute; top: 0; right: 50%; border-top: 3px solid var(--gold-dark); width: 50%; height: 80px; transition: 0.3s; box-shadow: 0 0 5px rgba(184, 134, 11, 0.3); }
        .tree li::after { right: auto; left: 50%; border-left: 3px solid var(--gold-dark); }
        .tree li:only-child::after, .tree li:only-child::before { display: none; } .tree li:only-child { padding-top: 0; }
        .tree li:first-child::before, .tree li:last-child::after { border: 0 none; }
        .tree li:last-child::before { border-right: 3px solid var(--gold-dark); border-radius: 0 10px 0 0; }
        .tree li:first-child::after { border-radius: 10px 0 0 0; }
        .tree ul ul::before { content: ''; position: absolute; top: 0; left: 50%; border-left: 3px solid var(--gold-dark); width: 0; height: 80px; }

        .card { background: var(--card-bg); border: 2px solid var(--gold-dark); padding: 25px 15px; display: flex; flex-direction: column; align-items: center; text-decoration: none; color: var(--gold); border-radius: 8px; transition: 0.4s; position: relative; min-width: 210px; max-width: 230px; box-shadow: 0 10px 25px rgba(0,0,0,0.7); z-index: 2; }
        .card::after { content: '✤'; position: absolute; bottom: 5px; color: var(--gold-dark); font-size: 12px; }
        .card:hover { background: linear-gradient(160deg, #a30000, #4a0000); transform: translateY(-10px) scale(1.08); z-index: 100; border-color: #fff; box-shadow: 0 0 35px var(--gold); }
        .card:hover + ul li::after, .card:hover + ul li::before, .card:hover + ul::before, .card:hover + ul ul::before { border-color: var(--gold); box-shadow: 0 0 15px var(--gold); }
        .avatar-frame { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--gold-dark); overflow: hidden; margin-bottom: 15px; background: #000; transition: 0.5s; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        .card:hover .avatar-frame { transform: rotate(360deg); border-color: #fff; }
        .avatar-frame img { width: 100%; height: 100%; object-fit: cover; filter: sepia(30%) contrast(1.1); }
        .role { font-size: 0.7rem; color: #ccc; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; font-family: 'Cinzel'; }
        .name { font-family: 'Cinzel', serif; font-size: 1.2rem; font-weight: bold; margin: 5px 0; color: #fff; text-transform: uppercase; text-shadow: 1px 1px 2px #000; }
        .dates { font-size: 0.9rem; color: var(--gold); font-style: italic; }
        .root-card { border: 3px solid var(--gold); min-width: 300px; background: linear-gradient(to bottom, #5e0000, #240000); padding: 35px 20px; }
        .root-card .avatar-frame { width: 110px; height: 110px; border-color: var(--gold); }
        .root-card .name { font-size: 1.6rem; color: var(--gold); }

        /* POPUP */
        .modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); backdrop-filter: blur(8px); animation: fadeIn 0.4s; }
        .modal-content { background: #fff; color: #333; margin: 3% auto; width: 95%; max-width: 700px; border-radius: 12px; overflow: hidden; border: 3px solid var(--gold); box-shadow: 0 0 50px rgba(212, 175, 55, 0.3); display: flex; flex-direction: column; }
        .modal-header { background: #800000; padding: 30px 20px; color: white; text-align: center; position: relative; border-bottom: 3px solid var(--gold); }
        .modal-avatar-large { width: 130px; height: 130px; border-radius: 50%; border: 5px solid var(--gold); object-fit: cover; margin: 0 auto 15px; display: block; background: #000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .close { color: var(--gold); position: absolute; right: 20px; top: 15px; font-size: 35px; cursor: pointer; transition: 0.3s; }
        .close:hover { color: #fff; transform: rotate(90deg); }
        .modal-body { padding: 30px; overflow-y: auto; max-height: 60vh; font-family: 'Merriweather', serif; background: #fdfbf7; }
        .bio-section { background: #fff; padding: 20px; border: 2px solid var(--gold-dark); margin-top: 10px; font-style: italic; color: #555; border-radius: 8px; position: relative; }
        .bio-section::before { content: '“'; font-size: 60px; color: var(--gold-dark); opacity: 0.3; position: absolute; top: -10px; left: 10px; }
        @keyframes fadeIn { from {opacity: 0; transform: scale(0.95);} to {opacity: 1; transform: scale(1);} }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn"><i class="fa-solid fa-arrow-left"></i> TRANG CHỦ</a>

    <header>
        <div class="header-content">
            <img src="images/Rong-viet.png" alt="Rồng Việt" class="dragon-img dragon-left">
            <div>
                <h1>PHẢ ĐỒ ĐẠI TÔNG HỌ PHAN</h1>
                <p class="sub-header">"Mộc bản chi nguyên - Thủy hữu chi lưu"</p>
            </div>
            <img src="images/Rong-viet.png" alt="Rồng Việt" class="dragon-img">
        </div>
        <p style="font-size: 0.8rem; color: #888; margin-top: 20px;">(Dùng chuột kéo để di chuyển - Bấm vào từng cụ để xem chi tiết)</p>
    </header>

    <div class="genealogy-scroll" id="dragScroll">
        <div class="tree">
            <ul>
                <li>
                    <a href="javascript:void(0)" class="card root-card" onclick="showDetail(this)"
                       data-name="PHAN TƯỚNG CÔNG" data-dates="(1650 - 1720)" 
                       data-img="https://ui-avatars.com/api/?name=T%E1%BB%95&background=740000&color=fff&size=200&font-size=0.5">
                        <div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=T%E1%BB%95&background=740000&color=fff&size=200&font-size=0.5"></div>
                        <span class="role">Thủy Tổ</span>
                        <span class="name">PHAN TƯỚNG CÔNG</span>
                        <span class="dates">(1650 - 1720)</span>
                    </a>
                    
                    <ul>
                        <li>
                            <a href="javascript:void(0)" class="card" onclick="showDetail(this)"
                               data-name="PHAN VĂN ÂN" data-dates="(1700 - 1775)" data-img="images/phanthanhgian.png">
                                <div class="avatar-frame"><img src="images/phanthanhgian.png"></div>
                                <span class="role">Đời 2 - Trưởng Nam</span>
                                <span class="name">Phan Văn Ân</span>
                                <span class="dates">(1700 - 1775)</span>
                            </a>
                            
                            <ul>
                                <li>
                                    <a href="javascript:void(0)" class="card" onclick="showDetail(this)" data-name="PHAN VĂN BẢO" data-dates="(1740 - 1810)" data-img="https://ui-avatars.com/api/?name=P&background=333&color=fff"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 3</span><span class="name">Phan Văn Bảo</span></a>
                                    <ul>
                                        <li><a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 4</span><span class="name">Phan Văn Hùng</span></a></li>
                                        <li><a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 4</span><span class="name">Phan Thị Lan</span></a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:void(0)" class="card" onclick="showDetail(this)" data-name="PHAN VĂN CHÂU" data-dates="(1745 - 1815)" data-img="https://ui-avatars.com/api/?name=P&background=333&color=fff"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 3</span><span class="name">Phan Văn Châu</span></a>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript:void(0)" class="card" onclick="showDetail(this)"
                               data-name="PHAN HUY BÍCH" data-dates="(1705 - 1780)" data-img="images/phanboichau.png">
                                <div class="avatar-frame"><img src="images/phanboichau.png"></div>
                                <span class="role">Đời 2 - Thứ Nam</span>
                                <span class="name">Phan Huy Bích</span>
                                <span class="dates">(1705 - 1780)</span>
                            </a>
                            <ul>
                                <li>
                                    <a href="javascript:void(0)" class="card" onclick="showDetail(this)" data-name="PHAN HUY CHÚ" data-dates="(1750 - 1822)" data-img="images/phanchutrinh.png"><div class="avatar-frame"><img src="images/phanchutrinh.png"></div><span class="role">Đời 3 - Danh Nhân</span><span class="name">Phan Huy Chú</span></a>
                                    <ul>
                                        <li><a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 4</span><span class="name">Phan Huy Vịnh</span></a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript:void(0)" class="card" onclick="showDetail(this)"
                               data-name="PHAN VĂN CẨN" data-dates="(1710 - 1790)" data-img="https://ui-avatars.com/api/?name=P&background=333&color=fff">
                                <div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div>
                                <span class="role">Đời 2 - Út Nam</span>
                                <span class="name">Phan Văn Cẩn</span>
                                <span class="dates">(1710 - 1790)</span>
                            </a>
                            <ul>
                                <li>
                                    <a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 3</span><span class="name">Phan Văn Dũng</span></a>
                                    <ul><li><a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 4</span><span class="name">Phan Văn Tùng</span></a></li></ul>
                                </li>
                                <li><a href="javascript:void(0)" class="card"><div class="avatar-frame"><img src="https://ui-avatars.com/api/?name=P&background=333&color=fff"></div><span class="role">Đời 3</span><span class="name">Phan Thị Hoa</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <div id="memberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><span class="close" onclick="closeModal()">×</span><img id="m-img" src="" class="modal-avatar-large"><h2 id="m-name">TÊN THÀNH VIÊN</h2><p id="m-dates">Năm sinh - Năm mất</p></div>
            <div class="modal-body">
                <div class="bio-section"><strong>Thông tin chi tiết:</strong><br><span id="m-tieusu">Đang cập nhật dữ liệu...</span></div>
            </div>
        </div>
    </div>

    <script>
        function showDetail(el) {
            document.getElementById('m-name').innerText = el.getAttribute('data-name');
            document.getElementById('m-dates').innerText = el.getAttribute('data-dates');
            document.getElementById('m-img').src = el.getAttribute('data-img');
            document.getElementById('m-tieusu').innerText = "Thông tin chi tiết về cụ " + el.getAttribute('data-name') + " sẽ được hiển thị tại đây.";
            document.getElementById('memberModal').style.display = "block";
        }
        function closeModal() { document.getElementById('memberModal').style.display = "none"; }
        window.onclick = function(event) { if (event.target == document.getElementById('memberModal')) { closeModal(); } }
        
        const slider = document.getElementById('dragScroll'); let isDown = false; let startX; let scrollLeft;
        slider.addEventListener('mousedown', (e) => { isDown = true; slider.classList.add('active'); startX = e.pageX - slider.offsetLeft; scrollLeft = slider.scrollLeft; });
        slider.addEventListener('mouseleave', () => { isDown = false; slider.classList.remove('active'); });
        slider.addEventListener('mouseup', () => { isDown = false; slider.classList.remove('active'); });
        slider.addEventListener('mousemove', (e) => { if (!isDown) return; e.preventDefault(); const x = e.pageX - slider.offsetLeft; const walk = (x - startX) * 2; slider.scrollLeft = scrollLeft - walk; });
    </script>
</body>
</html>